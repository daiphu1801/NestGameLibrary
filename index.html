<!DOCTYPE html>
<html lang="vi" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NES Game Library</title>
    <meta name="description" content="Classic NES Games Collection - Play directly in your browser!">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://thumbnails.libretro.com">
    <link rel="dns-prefetch" href="https://thumbnails.libretro.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/main.css">

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ['class', '[data-theme="dark"]'],
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        'theme': {
                            'primary': 'var(--color-primary)',
                            'secondary': 'var(--color-secondary)',
                            'accent': 'var(--color-accent)',
                        }
                    },
                    backgroundColor: {
                        'theme-primary': 'var(--bg-primary)',
                        'theme-secondary': 'var(--bg-secondary)',
                        'theme-card': 'var(--bg-card)',
                    },
                    textColor: {
                        'theme-primary': 'var(--text-primary)',
                        'theme-secondary': 'var(--text-secondary)',
                        'theme-muted': 'var(--text-muted)',
                    },
                    borderColor: {
                        'theme': 'var(--border-color)',
                    },
                }
            }
        }
    </script>

    <!-- Nostalgist NES Emulator -->
    <script src="https://unpkg.com/nostalgist@latest"></script>
</head>

<body class="min-h-screen" style="background: var(--bg-primary); color: var(--text-primary);">
    <!-- Background Pattern -->
    <div class="bg-pattern">
        <div class="bg-animated"></div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-overlay__content">
            <div class="loading-overlay__spinner">
                <div class="loading-overlay__circle-bg"></div>
                <div class="loading-overlay__circle"></div>
                <div class="loading-overlay__icon">üéÆ</div>
            </div>
            <p class="loading-overlay__text">LOADING...</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10">
        <!-- Header -->
        <header class="header">
            <div class="container header__container">
                <!-- Logo -->
                <div id="logoContainer" class="logo" onclick="resetToDefault()" title="Nh·∫•n ƒë·ªÉ reset v·ªÅ m·∫∑c ƒë·ªãnh">
                    <div class="logo__icon-wrapper">
                        <div class="logo__icon">üéÆ</div>
                        <div class="logo__status"></div>
                    </div>
                    <div class="logo__text">
                        <h1 class="logo__title" data-i18n="app.title">NES Game Library</h1>
                        <p class="logo__subtitle">üïπÔ∏è <span data-i18n="app.subtitle">Th∆∞ vi·ªán Game NES Kinh ƒêi·ªÉn</span></p>
                    </div>
                </div>

                <!-- Search -->
                <div class="search-wrapper">
                    <div class="search-container">
                        <div class="relative flex-1">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="searchInput" 
                                data-i18n-placeholder="header.searchPlaceholder"
                                placeholder="T√¨m ki·∫øm game..."
                                class="search-input">
                            <button id="clearSearchBtn" class="search-clear hidden">‚úï</button>
                            <div class="search-shortcut">
                                <kbd>Ctrl+K</kbd>
                            </div>
                        </div>
                        <button id="searchBtn" class="search-btn">
                            <span>üîç</span>
                            <span class="hidden sm:inline" data-i18n="header.search">T√¨m</span>
                        </button>
                    </div>
                </div>

                <!-- Actions -->
                <div class="header__actions">
                    <!-- Stats -->
                    <div class="stats-display">
                        <span class="stats-display__icon">üìä</span>
                        <span class="stats-display__label" data-i18n="header.gamesFound">T√¨m th·∫•y:</span>
                        <span id="gameCount" class="stats-display__value">0</span>
                        <span class="stats-display__label" data-i18n="header.games">games</span>
                    </div>

                    <!-- Theme Toggle -->
                    <button id="themeToggle" class="toggle-btn" title="Toggle Dark/Light Mode">
                        <span class="toggle-btn__icon">üåô</span>
                    </button>

                    <!-- Language Toggle -->
                    <button id="langToggle" onclick="I18n.toggleLanguage()" class="toggle-btn" title="Switch language">
                        üáªüá≥
                    </button>
                </div>
            </div>

            <!-- Popular Tags -->
            <div class="container">
                <div class="popular-tags">
                    <span class="popular-tags__label">üî• <span data-i18n="search.hot">N√™n th·ª≠</span>:</span>
                    <button onclick="document.getElementById('searchInput').value='Mario';SearchFilter.performSearch();" class="popular-tag">
                        üçÑ Mario
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Contra';SearchFilter.performSearch();" class="popular-tag">
                        üî´ Contra
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Zelda';SearchFilter.performSearch();" class="popular-tag">
                        ‚öîÔ∏è Zelda
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Mega Man';SearchFilter.performSearch();" class="popular-tag">
                        ü§ñ Mega Man
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Castlevania';SearchFilter.performSearch();" class="popular-tag">
                        üßõ Castlevania
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Metroid';SearchFilter.performSearch();" class="popular-tag">
                        üöÄ Metroid
                    </button>
                    <button onclick="document.getElementById('searchInput').value='Tetris';SearchFilter.performSearch();" class="popular-tag">
                        üß© Tetris
                    </button>
                </div>
            </div>
        </header>

        <!-- Category Filter -->
        <div class="category-bar">
            <div class="container">
                <div class="category-scroll">
                    <button data-category="all" class="category-btn category-btn--active">
                        <span>üéÆ</span>
                        <span data-i18n="categories.all">T·∫•t c·∫£</span>
                    </button>
                    <button data-category="platformer" class="category-btn">
                        <span>üèÉ</span>
                        <span data-i18n="categories.platformer">Platform</span>
                    </button>
                    <button data-category="rpg" class="category-btn">
                        <span>‚öîÔ∏è</span>
                        <span data-i18n="categories.rpg">RPG</span>
                    </button>
                    <button data-category="sports" class="category-btn">
                        <span>‚öΩ</span>
                        <span data-i18n="categories.sports">Th·ªÉ thao</span>
                    </button>
                    <button data-category="fighting" class="category-btn">
                        <span>ü•ä</span>
                        <span data-i18n="categories.fighting">ƒê·ªëi kh√°ng</span>
                    </button>
                    <button data-category="puzzle" class="category-btn">
                        <span>üß©</span>
                        <span data-i18n="categories.puzzle">Puzzle</span>
                    </button>
                    <button data-category="racing" class="category-btn">
                        <span>üèéÔ∏è</span>
                        <span data-i18n="categories.racing">ƒêua xe</span>
                    </button>
                    <button data-category="shooter" class="category-btn">
                        <span>üî´</span>
                        <span data-i18n="categories.shooter">Shooter</span>
                    </button>
                    <button data-category="strategy" class="category-btn">
                        <span>üéØ</span>
                        <span data-i18n="categories.strategy">Chi·∫øn thu·∫≠t</span>
                    </button>
                    <button data-category="adventure" class="category-btn">
                        <span>üó∫Ô∏è</span>
                        <span data-i18n="categories.adventure">Phi√™u l∆∞u</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="container main-content">
            <!-- Featured Section -->
            <section class="mb-12">
                <!-- Section Header -->
                <div class="section-header">
                    <div class="section-icon section-icon--featured">
                        <span>‚≠ê</span>
                    </div>
                    <div class="section-info">
                        <h2 class="section-title" data-i18n="featured.title">Games Kinh ƒêi·ªÉn</h2>
                        <p class="section-subtitle" data-i18n="featured.subtitle">Nh·ªØng t·ª±a game huy·ªÅn tho·∫°i kh√¥ng th·ªÉ b·ªè qua</p>
                    </div>
                </div>

                <!-- Welcome Banner -->
                <div class="welcome-banner">
                    <div class="welcome-banner__content">
                        <div class="welcome-banner__icon">üéÆ</div>
                        <div class="welcome-banner__text">
                            <h3 class="welcome-banner__title" data-i18n="welcome.title">
                                Ch√†o m·ª´ng ƒë·∫øn v·ªõi NES Game Library!
                            </h3>
                            <p id="welcomeDescription" class="welcome-banner__description">
                                Kh√°m ph√° h∆°n 1700+ game NES kinh ƒëi·ªÉn.
                            </p>
                            <div class="welcome-banner__tags">
                                <span class="welcome-tag">üÜì <span data-i18n="welcome.free">Mi·ªÖn ph√≠</span></span>
                                <span class="welcome-tag">‚ö° <span data-i18n="welcome.noInstall">Kh√¥ng c·∫ßn c√†i ƒë·∫∑t</span></span>
                                <span class="welcome-tag">üíæ <span data-i18n="welcome.saveState">Save state</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Grid Section -->
            <section>
                <!-- Section Header with Sort -->
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6">
                    <div class="section-header mb-0">
                        <div class="section-icon">
                            <span>üìö</span>
                        </div>
                        <div class="section-info">
                            <h2 class="section-title" data-i18n="library.title">Th∆∞ vi·ªán Games</h2>
                            <p class="section-subtitle" data-i18n="library.subtitle">Duy·ªát v√† ch·ªçn game ƒë·ªÉ ch∆°i</p>
                        </div>
                    </div>

                    <!-- Sort Options -->
                    <div class="sort-container">
                        <span class="sort-label" data-i18n="sort.label">S·∫Øp x·∫øp:</span>
                        <select id="sortSelect" class="sort-select">
                            <option value="name-asc" data-i18n="sort.nameAsc">T√™n A-Z</option>
                            <option value="name-desc" data-i18n="sort.nameDesc">T√™n Z-A</option>
                            <option value="rating-desc" data-i18n="sort.ratingDesc">ƒê√°nh gi√° cao</option>
                            <option value="year-desc" data-i18n="sort.yearDesc">M·ªõi nh·∫•t</option>
                            <option value="year-asc" data-i18n="sort.yearAsc">C≈© nh·∫•t</option>
                        </select>
                    </div>
                </div>

                <!-- Game Grid -->
                <div id="gameGrid" class="game-grid"></div>

                <!-- Pagination -->
                <div id="paginationContainer" class="pagination">
                    <div id="pageInfo" class="pagination__info"></div>
                    <div id="paginationBtns" class="pagination__buttons"></div>
                    <div class="pagination__per-page">
                        <span style="color: var(--text-muted);" data-i18n="pagination.itemsPerPage">Hi·ªÉn th·ªã:</span>
                        <select id="itemsPerPageSelect" class="pagination__select">
                            <option value="24">24</option>
                            <option value="48">48</option>
                            <option value="60" selected>60</option>
                            <option value="96">96</option>
                            <option value="120">120</option>
                        </select>
                        <span style="color: var(--text-muted);" data-i18n="pagination.games">games</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container footer__content">
                <div class="footer__logo">
                    <span class="footer__logo-icon">üéÆ</span>
                    <span class="footer__logo-text">NES Game Library</span>
                </div>
                <p class="footer__powered">
                    <span data-i18n="footer.poweredBy">Powered by</span> 
                    <a href="https://github.com/nicklockwood/Nostalgist" class="footer__link">Nostalgist.js</a>
                </p>
                <div class="footer__stats">
                    <span class="footer__stat">üïπÔ∏è 1700+ <span data-i18n="footer.gamesCount">Games</span></span>
                    <span>‚Ä¢</span>
                    <span class="footer__stat">üíª <span data-i18n="footer.playOnBrowser">Ch∆°i tr√™n tr√¨nh duy·ªát</span></span>
                    <span>‚Ä¢</span>
                    <span class="footer__stat">‚≠ê <span data-i18n="footer.free100">Mi·ªÖn ph√≠ 100%</span></span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" class="scroll-top-btn" title="L√™n ƒë·∫ßu trang">‚Üë</button>

    <!-- Game Modal -->
    <div id="gameModal" class="fixed inset-0 z-50 hidden items-center justify-center" style="background: var(--bg-primary);">
        <div class="relative w-full h-full flex flex-col">
            <!-- Top Bar -->
            <div class="flex items-center justify-between p-4" style="background: var(--bg-secondary); border-bottom: 1px solid var(--border-color);">
                <div class="flex items-center gap-3">
                    <div class="section-icon" style="width: 40px; height: 40px;">
                        <span>üéÆ</span>
                    </div>
                    <div>
                        <h3 id="modalTitle" class="font-bold" style="color: var(--text-primary);">Game Title</h3>
                        <p style="font-size: var(--text-xs); color: var(--text-muted);" data-i18n="modal.pressEscToBack">Nh·∫•n ESC ƒë·ªÉ quay l·∫°i</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="toggleFullscreen()" class="btn btn-secondary btn-sm">
                        <span>‚õ∂</span> 
                        <span data-i18n="modal.fullscreen">Fullscreen</span>
                    </button>
                    <button onclick="closeModal()" class="btn btn-danger btn-sm">
                        <span>‚úï</span> 
                        <span data-i18n="modal.close">ƒê√≥ng</span> (ESC)
                    </button>
                </div>
            </div>

            <!-- Game Container -->
            <div id="gameContainer" class="flex-1 flex items-center justify-center overflow-hidden" style="background: #000;">
                <div class="text-center" style="color: var(--text-muted);">
                    <div class="text-6xl mb-4" style="animation: pulse 2s infinite;">üéÆ</div>
                    <p>Loading...</p>
                </div>
            </div>

            <!-- Controls Bar -->
            <div class="p-4" style="background: var(--bg-secondary); border-top: 1px solid var(--border-color);">
                <div class="flex flex-wrap justify-center gap-4 text-xs" style="color: var(--text-muted);">
                    <div class="flex items-center gap-2">
                        <kbd class="px-2 py-1 rounded" style="background: var(--bg-tertiary);">‚Üë‚Üì‚Üê‚Üí</kbd>
                        <span>Di chuy·ªÉn</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <kbd class="px-2 py-1 rounded" style="background: var(--color-success); color: white;">Z</kbd>
                        <span>N√∫t A</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <kbd class="px-2 py-1 rounded" style="background: var(--color-info); color: white;">X</kbd>
                        <span>N√∫t B</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <kbd class="px-2 py-1 rounded" style="background: var(--color-warning); color: white;">Enter</kbd>
                        <span>Start</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <kbd class="px-2 py-1 rounded" style="background: var(--color-accent); color: white;">ESC</kbd>
                        <span>Quay l·∫°i</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/data/games.js"></script>
    <script src="assets/js/i18n.js"></script>

    <!-- Module Scripts -->
    <script src="assets/js/modules/config.js"></script>
    <script src="assets/js/modules/state.js"></script>
    <script src="assets/js/modules/dom.js"></script>
    <script src="assets/js/modules/utils.js"></script>
    <script src="assets/js/modules/imageLoader.js"></script>
    <script src="assets/js/modules/recentGames.js"></script>
    <script src="assets/js/modules/search.js"></script>
    <script src="assets/js/modules/pagination.js"></script>
    <script src="assets/js/modules/gameRenderer.js"></script>
    <script src="assets/js/modules/modal.js"></script>
    <script src="assets/js/modules/gamePlayer.js"></script>
    <script src="assets/js/modules/theme.js"></script>

    <!-- Main Application -->
    <script src="assets/js/app.js"></script>
</body>

</html>
